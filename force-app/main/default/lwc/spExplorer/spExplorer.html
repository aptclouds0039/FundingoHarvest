<template>
  <lightning-card icon-name="standard:account" variant="base">
    <div slot="title">
      Sharepoint Explorer
    </div>
    <div slot="actions">
        
    </div>
    <div slot="footer">
    
    </div>
    <div>
      <div class="slds-grid slds-wrap">
        <template if:false={showBackButton}>
          <div class="slds-col slds-size_1-of-12">
            <div class="slds-align_absolute-center" style="height:5rem">
              <lightning-button label="Back" onclick={handleBackClick}></lightning-button>
            </div>
          </div>
        </template>
        <div class="slds-col slds-size_2-of-12">
          <div class="slds-align_absolute-center" style="height:5rem;">
            <lightning-input type="file" onchange={addFiles} style="margin-bottom: 6%;"></lightning-input>
          </div>
        </div>
        <div class="slds-col slds-size_1-of-12">
          <div class="slds-align_absolute-center" style="height:5rem">
            <lightning-button label="Upload" onclick={uploadFiles}></lightning-button>
          </div>
        </div>
      </div>
      <div>
        <div class="slds-grid slds-wrap slds-var-p-around_medium">
          <lightning-breadcrumbs>
            <template for:each={folderHeirarchy} for:item="folder" for:index="folderIndex">
              <lightning-breadcrumb label={folder.name} data-id={folder.id} key={id} data-key={folderIndex} style="font-size: 17px;" class="slds-text-link_reset slds-text-link slds-p-left_medium" onclick={handleBreadCrumbClick}></lightning-breadcrumb>
            </template>
          </lightning-breadcrumbs>
          
        </div>
        <!-- Slot to implement folder struture -->
      </div>

      <div class="dataTableWrapper slds-p-around_xx-small">
        <c-custom-datatable
          onviewfile={handleFileClick}
          key-field="id"
          data={someData}
          columns={datatableColumns}
        ></c-custom-datatable>
      </div>
    </div>
  </lightning-card>
  <template if:true={showLoadingSpinner}>
    <div class="exampleHolder">
      <lightning-spinner alternative-text="Loading" size="small"></lightning-spinner>
    </div>
  </template>
    
    
</template>

<!-- To Do Tasks
   1. Implement Folder breadcrumb structure -- Done
   2. Everything constant moved to top -- Done
   3. Everything confidential moved to metadata -- Done
   4. Name of file file uploaded to be shown
   5. Multiple file uploads
   6. Refresh after file is uploaded
   7. New folder button
   8. Spinner  -- Done
   9. Latest data to be shown. 
  10. Use Cleaner Code
  11. UX improvement in folder name and Icon -- Done
-->

<!-- 
  Folder Structure Implementation >>
  1. Create a list to store all folder structures
  2. In start add root to the list, with name index and id as root
  3. When we click on folder, add name folder Id, and other details to the list
  4. When back is clicked, pop last element from the list
  5. When a specific folder is clicked in the bc, get the index of that element and remove other elements right to it.

 -->